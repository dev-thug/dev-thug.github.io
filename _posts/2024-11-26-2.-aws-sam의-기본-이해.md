---
title: 2. AWS SAMì˜ ê¸°ë³¸ ì´í•´
description: ì„œë²„ë¦¬ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì½”ë“œë¡œ ì •ì˜í•˜ê³ , ë²„ì „ ê´€ë¦¬ ë° í˜‘ì—…ì´ ìš©ì´í•œ í™˜ê²½ì„ êµ¬ì¶•í•˜ê¸°
author: dev-thug
date: 2024-11-26 14:27
categories:
  - AWS SAM
tags:
  - Serverless
pin: true
math: true
mermaid: true
---
**1. AWS SAMì´ë€ ë¬´ì—‡ì¸ê°€?**

**AWS Serverless Application Model(AWS SAM)**ì€ ì„œë²„ë¦¬ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì†ì‰½ê²Œ ê°œë°œ, ë°°í¬, ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. AWS SAMì€ AWS CloudFormationì„ í™•ì¥í•˜ì—¬ ì„œë²„ë¦¬ìŠ¤ ë¦¬ì†ŒìŠ¤ë¥¼ ê°„ë‹¨í•˜ê³  ê°„ê²°í•œ í˜•ì‹ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

**AWS SAMì˜ ì£¼ìš” íŠ¹ì§•:**

- **ê°„ê²°í•œ ë¬¸ë²•:** Lambda í•¨ìˆ˜, API Gateway, DynamoDB í…Œì´ë¸” ë“± ì„œë²„ë¦¬ìŠ¤ ë¦¬ì†ŒìŠ¤ë¥¼ ì§§ê³  ì´í•´í•˜ê¸° ì‰¬ìš´ ë¬¸ë²•ìœ¼ë¡œ ì •ì˜í•©ë‹ˆë‹¤.
- **ë¡œì»¬ ê°œë°œ ë° í…ŒìŠ¤íŠ¸ ì§€ì›:** SAM CLIë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ì—ì„œ í•¨ìˆ˜ ì‹¤í–‰, ë””ë²„ê¹…, API í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- **ë°°í¬ ìë™í™”:** sam deploy ëª…ë ¹ì„ í†µí•´ CloudFormation ìŠ¤íƒì„ ìƒì„±í•˜ê³  ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.


---

**2. AWS SAMê³¼ CloudFormationì˜ ê´€ê³„**

**AWS CloudFormation**ì€ AWS ë¦¬ì†ŒìŠ¤ë¥¼ ì½”ë“œë¡œ ì •ì˜í•˜ê³  í”„ë¡œë¹„ì €ë‹í•˜ëŠ” IaC(Infrastructure as Code) ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. AWS SAMì€ CloudFormationì˜ í™•ì¥ìœ¼ë¡œ, ì„œë²„ë¦¬ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì— íŠ¹í™”ëœ ë¦¬ì†ŒìŠ¤ ìœ í˜•ê³¼ ì†ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.

**SAM í…œí”Œë¦¿ì˜ ì‘ë™ ë°©ì‹:**

1. **SAM í…œí”Œë¦¿ ì‘ì„±:** YAML ë˜ëŠ” JSON íŒŒì¼ë¡œ ì„œë²„ë¦¬ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
2. **SAM ë³€í™˜:** Transform: AWS::Serverless-2016-10-31 ì§€ì‹œì–´ë¥¼ í†µí•´ SAM í…œí”Œë¦¿ì´ CloudFormation í…œí”Œë¦¿ìœ¼ë¡œ ë³€í™˜ë©ë‹ˆë‹¤.
3. **CloudFormation ìŠ¤íƒ ìƒì„±:** ë³€í™˜ëœ í…œí”Œë¦¿ì„ ê¸°ë°˜ìœ¼ë¡œ AWS ë¦¬ì†ŒìŠ¤ê°€ ìƒì„±ë˜ê³  ê´€ë¦¬ë©ë‹ˆë‹¤.



---

**3. SAM í…œí”Œë¦¿ êµ¬ì¡° ì´í•´**

SAM í…œí”Œë¦¿ì€ ì¼ë°˜ì ì¸ CloudFormation í…œí”Œë¦¿ êµ¬ì¡°ë¥¼ ë”°ë¥´ë©°, ë‹¤ìŒê³¼ ê°™ì€ ì£¼ìš” ì„¹ì…˜ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.

- **Globals:** ëª¨ë“  ì„œë²„ë¦¬ìŠ¤ ë¦¬ì†ŒìŠ¤ì— ê³µí†µìœ¼ë¡œ ì ìš©ë  ê¸°ë³¸ ì„¤ì •ì„ ì •ì˜í•©ë‹ˆë‹¤.
- **Resources:** ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•  Lambda í•¨ìˆ˜, API, DynamoDB í…Œì´ë¸” ë“± ë¦¬ì†ŒìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
- **Outputs:** ìŠ¤íƒ ìƒì„± í›„ ì¶œë ¥í•  ê°’ì„ ì§€ì •í•©ë‹ˆë‹¤.
- **Parameters:** í…œí”Œë¦¿ì—ì„œ ì‚¬ìš©í•  ë³€ìˆ˜ë¥¼ ì •ì˜í•˜ì—¬ ì¬ì‚¬ìš©ì„±ê³¼ ìœ ì—°ì„±ì„ ë†’ì…ë‹ˆë‹¤

**ì˜ˆì‹œ êµ¬ì¡°:**

```yaml
AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: SAM ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜ˆì œ

Globals:
  Function:
    Runtime: python3.9
    Timeout: 15

Resources:
  HelloWorldFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: app.lambda_handler
      CodeUri: src/

Outputs:
  HelloWorldApi:
    Description: API Gateway ì—”ë“œí¬ì¸íŠ¸ URL
    Value: !Sub 'https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/hello/'
    
```



---

**4. ê°œë°œ í™˜ê²½ ì„¤ì •**

AWS SAMì„ ì‚¬ìš©í•˜ë ¤ë©´ ëª‡ ê°€ì§€ ë„êµ¬ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

**4.1 í•„ìˆ˜ ë„êµ¬ ì„¤ì¹˜**

- **AWS CLI(AWS Command Line Interface):** AWS ì„œë¹„ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©í•˜ê¸° ìœ„í•œ ëª…ë ¹ì¤„ ë„êµ¬ì…ë‹ˆë‹¤.
- **SAM CLI:** AWS SAM ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œ, í…ŒìŠ¤íŠ¸, ë°°í¬í•˜ê¸° ìœ„í•œ ë„êµ¬ì…ë‹ˆë‹¤.
- **Docker:** ë¡œì»¬ì—ì„œ Lambda ì‹¤í–‰ í™˜ê²½ì„ ì—ë®¬ë ˆì´ì…˜í•˜ê¸° ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤.

  

**ì„¤ì¹˜ ê°€ì´ë“œ:**
- **AWS CLI ì„¤ì¹˜:**
	- ê³µì‹ ì‚¬ì´íŠ¸: [AWS CLI ì„¤ì¹˜ ê°€ì´ë“œ](https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/getting-started-install.html)
- **SAM CLI ì„¤ì¹˜:**
	- ê³µì‹ ì‚¬ì´íŠ¸: [SAM CLI ì„¤ì¹˜ ê°€ì´ë“œ](https://docs.aws.amazon.com/ko_kr/serverless-application-model/latest/developerguide/install-sam-cli.html)
- **Docker ì„¤ì¹˜:**
	- ê³µì‹ ì‚¬ì´íŠ¸: [Docker ë‹¤ìš´ë¡œë“œ](https://www.docker.com/get-started)


>ğŸ’¡ê° OSì— ë”°ë¼ íŒ¨í‚¤ì§€ ê´€ë¦¬ìë¥¼ í†µí•´ ì„¤ì¹˜ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
> 
> Windows íŒ¨í‚¤ì§€ ê´€ë¦¬ì: Windows Package Manager(winget)ëŠ” Windows í™˜ê²½ì—ì„œ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì„¤ì¹˜, ì—…ë°ì´íŠ¸, ì‚­ì œí•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì¤„ ê¸°ë°˜ ë„êµ¬ì…ë‹ˆë‹¤.
> 
> Mac íŒ¨í‚¤ì§€ ê´€ë¦¬ì: HomebrewëŠ” macOSì—ì„œ í•„ìš”í•œ ì†Œí”„íŠ¸ì›¨ì–´ì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜, ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì¤„ ê¸°ë°˜ íŒ¨í‚¤ì§€ ê´€ë¦¬ìì…ë‹ˆë‹¤.


**4.2 AWS ê³„ì • ë° IAM ì„¤ì •**

- **AWS ê³„ì • ìƒì„±:** ì•„ì§ AWS ê³„ì •ì´ ì—†ë‹¤ë©´ [AWS ê°€ì… í˜ì´ì§€](https://portal.aws.amazon.com/billing/signup#/start)ì—ì„œ ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤.
- **IAM ì‚¬ìš©ì ìƒì„±:** ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€ì— ë”°ë¼ ë£¨íŠ¸ ê³„ì • ëŒ€ì‹  IAM ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ê³  í•„ìš”í•œ ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.
	- **í•„ìš”í•œ ê¶Œí•œ:** AWSLambdaFullAccess, AmazonAPIGatewayAdministrator, AWSCloudFormationFullAccess ë“±


---

**5. ì²« ë²ˆì§¸ SAM ì• í”Œë¦¬ì¼€ì´ì…˜ ë§Œë“¤ê¸°**

ê°„ë‹¨í•œ â€œHello Worldâ€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.

**5.1 SAM ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”**

í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
```bash
sam init
```
í”„ë¡¬í”„íŠ¸ì— ë”°ë¼ ì˜µì…˜ì„ ì„ íƒí•©ë‹ˆë‹¤.

1. **í…œí”Œë¦¿ ì†ŒìŠ¤ ì„ íƒ:**
```bash
Which template source would you like to use?
	1 - AWS Quick Start Templates
	2 - Custom Template Location
Choice: 1

Choose an AWS Quick Start application template
	1 - Hello World Example
	2 - Data processing
	3 - Hello World Example with Powertools for AWS Lambda
	4 - Multi-step workflow
	5 - Scheduled task
	6 - Standalone function
	7 - Serverless API
	8 - Infrastructure event management
	9 - Lambda Response Streaming
	10 - Serverless Connector Hello World Example
	11 - Multi-step workflow with Connectors
	12 - GraphQLApi Hello World Example
	13 - Full Stack
	14 - Lambda EFS example
	15 - DynamoDB Example
	16 - Machine Learning
Template: 1
```


2. **ëŸ°íƒ€ì„ ë° ë¡œê¹… ì˜µì…˜ ì„ íƒ:**

```bash
Use the most popular runtime and package type? (python3.13 and zip) [y/N]:  y

Would you like to enable X-Ray tracing on the function(s) in your application?  [y/N]: N

Would you like to enable monitoring using CloudWatch Application Insights?
For more info, please view https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/cloudwatch-application-insights.html [y/N]: N

Would you like to set Structured Logging in JSON format on your Lambda functions?  [y/N]: N
```


3. **í”„ë¡œì íŠ¸ ì´ë¦„ ì…ë ¥:**

```bash
Project name [sam-app]: sam-app
```
ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ì›í•˜ëŠ” ì´ë¦„ì„ ì…ë ¥í•©ë‹ˆë‹¤.

**5.2 í”„ë¡œì íŠ¸ êµ¬ì¡° í™•ì¸**

ìƒì„±ëœ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•©ë‹ˆë‹¤.
```bash
cd sam-app
```
ë””ë ‰í† ë¦¬ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
```bash
sam-app/
â”œâ”€â”€ README.md
â”œâ”€â”€ samconfig.toml
â”œâ”€â”€ template.yaml
â”œâ”€â”€ .gitignore
â”œâ”€â”€ events/
â”‚   â””â”€â”€ event.json
â”œâ”€â”€ hello_world/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ app.py
â”‚   â””â”€â”€ requirements.txt
â””â”€â”€ tests/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ requirements.txt
    â”œâ”€â”€ integration/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â””â”€â”€ test_api_gateway.py
    â””â”€â”€ unit/
        â”œâ”€â”€ __init__.py
        â””â”€â”€ test_handler.py
```
â€¢ **template.yaml:** SAM í…œí”Œë¦¿ íŒŒì¼ë¡œ, ë¦¬ì†ŒìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
â€¢ **hello_world/app.py:** Lambda í•¨ìˆ˜ì˜ í•¸ë“¤ëŸ¬ ì½”ë“œê°€ ë“¤ì–´ ìˆìŠµë‹ˆë‹¤.

**5.3 ì½”ë“œ ì´í•´í•˜ê¸°**

```bash
Resources:
  HelloWorldFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: hello_world/
      Handler: app.lambda_handler
      Runtime: python3.9
      Architectures:
		- x86_64
      Events:
        HelloWorld:
          Type: Api
          Properties:
            Path: /hello
            Method: get
```
- **Type:** AWS::Serverless::Functionì€ Lambda í•¨ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
- **Events:** í•¨ìˆ˜ì˜ íŠ¸ë¦¬ê±°ë¡œ API Gateway ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

> [!NOTE]
> â€¢ **Lambda í•¨ìˆ˜ì˜ ì´ë²¤íŠ¸ë¡œ APIë¥¼ ì§€ì •í•˜ë©´, SAMì´ ìë™ìœ¼ë¡œ API Gatewayë¥¼ ìƒì„±í•˜ê³  ì„¤ì •í•©ë‹ˆë‹¤.**
> â€¢ **ë³„ë„ì˜ API Gateway ë¦¬ì†ŒìŠ¤ë¥¼ ì •ì˜í•˜ì§€ ì•Šì•„ë„ Lambda í•¨ìˆ˜ì™€ ì—°ë™ëœ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**
> â€¢ **ë” ë³µì¡í•œ ì„¤ì •ì´ í•„ìš”í•œ ê²½ìš°,** AWS::Serverless::Api **ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ API Gatewayë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**
> 
> **Reference:** [AWS SAMì—ì„œ Lambda í•¨ìˆ˜ì˜ Typeê³¼ API Gatewayì˜ ì„¤ì •](https://dev-thug.github.io/posts/aws-sam%EC%97%90%EC%84%9C-lambda-%ED%95%A8%EC%88%98%EC%9D%98-type%EA%B3%BC-api-gateway%EC%9D%98-%EC%84%A4%EC%A0%95/)



**5.4 ë¡œì»¬ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹Œë“œ**

```bash
sam build
```
ì´ ëª…ë ¹ì€ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ê³  ë°°í¬ ê°€ëŠ¥í•œ íŒ¨í‚¤ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**5.5 ë¡œì»¬ì—ì„œ í•¨ìˆ˜ ì‹¤í–‰ ë° í…ŒìŠ¤íŠ¸**

ë¡œì»¬ì—ì„œ Lambda í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ Dockerê°€ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
```bash
sam local invoke HelloWorldFunction --event events/event.json
```
â€¢ **â€“event:** í…ŒìŠ¤íŠ¸ ì´ë²¤íŠ¸ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.

API Gatewayë¥¼ ë¡œì»¬ì—ì„œ ì—ë®¬ë ˆì´ì…˜í•˜ë ¤ë©´:
```bash
sam local start-api
```
ë¸Œë¼ìš°ì €ë‚˜ API í´ë¼ì´ì–¸íŠ¸ì—ì„œ http://localhost:3000/helloì— ì ‘ì†í•˜ì—¬ ì‘ë‹µì„ í™•ì¸í•©ë‹ˆë‹¤.


---

**Reference:**

[[AWS SAMì—ì„œ Lambda í•¨ìˆ˜ì˜ Typeê³¼ API Gatewayì˜ ì„¤ì •|AWS SAMì—ì„œ Lambda í•¨ìˆ˜ì˜ Typeê³¼ API Gatewayì˜ ì„¤ì •]]


